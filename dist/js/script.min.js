function testWebP(t){var e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(t){1==t?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));class Slider{constructor(t,{pagination:e=!1,loop:i=!1}){this.sliderElement=t,this.sliderWrapper,this.sliderLine=t.querySelector(".slider-line"),this.sliderItems=[...t.querySelectorAll(".slider-item")],this.arrowParent=t.querySelector(".control-arrows"),this.arrowPrev=t.querySelector(".control-arrows__item-prev"),this.arrowNext=t.querySelector(".control-arrows__item-next"),this.controlPagination=e&&t.querySelector(".control-pagination"),this.pagination=e,this.loop=i,this.paginationBullets,this.sliderWrapperWidth,this.currentIndex=0,this.itemsLength=this.sliderItems.length,this.arrPosition=[],this.flag=!1,this.move=!1,this.currentItem,this.startX,this.currentTransform,this.centerSlide,this.lastPointerX,this.timestamp,this.speedX,this.slidePrev=this.slidePrev.bind(this),this.slideNext=this.slideNext.bind(this),this.resizeWindow=this.resizeWindow.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.wrapItems(),this.events()}events(){window.addEventListener("resize",this.resizeWindow);let t=debounce(this.slidePrev,600),e=debounce(this.slideNext,600);this.arrowPrev.addEventListener("click",t),this.arrowNext.addEventListener("click",e),this.paginationBullets&&this.paginationBullets.forEach(((t,e)=>{t.addEventListener("click",(()=>{this.selectPaginationSlide(e)}))})),this.sliderWrapper.addEventListener("pointerdown",this.onPointerDown)}wrapItems(){this.sliderLine=document.createElement("div"),this.sliderLine.className="slider-line",this.sliderWrapper=document.createElement("div"),this.sliderWrapper.className="slider-wrapper",this.sliderItems.forEach((t=>this.sliderWrapper.appendChild(t))),this.sliderLine.appendChild(this.sliderWrapper),this.sliderElement.insertAdjacentElement("afterbegin",this.sliderLine),this.sliderWrapperWidth=this.sliderWrapper.offsetWidth,this.loop?(this.initLoopSlider(),this.sliderWrapper.style.transition="none",this.sliderWrapper.style.transform=`translate(${-this.sliderWrapperWidth}px,0)`,this.sliderItems.forEach(((t,e)=>{this.arrPosition.push((e+1)*-this.sliderWrapperWidth)}))):(this.disabledArrow(this.arrowPrev),this.sliderItems.forEach(((t,e)=>{this.arrPosition.push(e*-this.sliderWrapperWidth)}))),this.pagination&&this.createPaginationBullets()}createPaginationBullets(){let t="";for(let e=0;e<this.itemsLength;e++)t+='<span class="control-pagination__bullet"></span>';this.controlPagination.insertAdjacentHTML("afterbegin",`${t}`),this.paginationBullets=this.controlPagination.querySelectorAll(".control-pagination__bullet"),this.paginationBullets[this.currentIndex].classList.add("active")}initLoopSlider(){let t=this.sliderItems[0].cloneNode(!0);t.className="first-slider-elem";let e=this.sliderItems[this.itemsLength-1].cloneNode(!0);e.className="last-slider-elem",this.sliderWrapper.prepend(e),this.sliderWrapper.append(t)}slidePrev(){this.currentIndex<=0?(this.currentIndex=0,this.flag=!0):this.currentIndex--;let t=this.arrPosition[this.currentIndex];this.setChangeSlide(t)}slideNext(){this.currentIndex>=this.itemsLength-1?(this.currentIndex=this.itemsLength-1,this.flag=!0):this.currentIndex++;let t=this.arrPosition[this.currentIndex];this.setChangeSlide(t)}selectPaginationSlide(t){let e=this.arrPosition[t];this.currentIndex=t,this.flag=!1,this.setChangeSlide(e)}setChangeSlide(t){this.sliderWrapper.style.transition="",this.flag&&this.loop?this.activeLoop():(!this.loop&&this.currentIndex<=0?(this.disabledArrow(this.arrowPrev),this.enabledArrow(this.arrowNext)):!this.loop&&this.currentIndex>=this.itemsLength-1?(this.disabledArrow(this.arrowNext),this.enabledArrow(this.arrowPrev)):(this.enabledArrow(this.arrowPrev),this.enabledArrow(this.arrowNext)),this.paginationBullets&&this.showActivePaginationElement(this.paginationBullets),this.setPositionSliderWrapper(t))}disabledArrow(t){t.style.opacity="0.3",t.disabled=!0}enabledArrow(t){t.style.opacity="1",t.disabled=!1}showActivePaginationElement(t){t.forEach((t=>t.classList.remove("active"))),t[this.currentIndex].classList.add("active")}activeLoop(){let t;this.currentIndex===this.itemsLength-1?(t=this.arrPosition[this.arrPosition.length-1]-this.sliderWrapperWidth,this.currentIndex=0):0===this.currentIndex&&(t=0,this.currentIndex=this.itemsLength-1),this.setPositionSliderWrapper(t),this.paginationBullets&&this.showActivePaginationElement(this.paginationBullets),this.sliderWrapper.addEventListener("transitionend",(()=>{this.sliderWrapper.addEventListener("pointerdown",this.onPointerDown),this.sliderWrapper.style.transition="none",this.setPositionSliderWrapper(this.arrPosition[this.currentIndex])}),{once:!0}),this.flag=!1}setPositionSliderWrapper(t){this.sliderWrapper.style.transform=`translate(${t}px,0)`}resizeWindow(){this.arrPosition=[],this.sliderWrapperWidth=this.sliderItems[0].offsetWidth,this.loop?this.sliderItems.forEach(((t,e)=>{this.arrPosition.push((e+1)*-this.sliderWrapperWidth)})):this.sliderItems.forEach(((t,e)=>{this.arrPosition.push(e*-this.sliderWrapperWidth)})),this.sliderWrapper.style.transition="none",this.sliderWrapper.style.transform=`translate(${this.arrPosition[this.currentIndex]}px,0)`}onPointerDown(t){this.currentItem=t.target.closest("div"),this.coordsLine=this.sliderLine.getBoundingClientRect(),this.centerSlide=this.sliderWrapperWidth/2,this.currentTransform=this.arrPosition[this.currentIndex],this.startX=t.clientX,this.timestamp=Date.now(),this.lastPointerX=t.clientX,document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp)}onPointerMove(t){this.coordsItemStart=this.currentItem.getBoundingClientRect().x-this.coordsLine.x,this.coordsItemEnd=this.currentItem.getBoundingClientRect().x+this.sliderWrapperWidth-this.coordsLine.x;let e=Date.now()-this.timestamp,i=Math.abs(t.clientX-this.lastPointerX);this.speedX=i/e*100;let s=t.clientX-this.startX+this.currentTransform;this.sliderWrapper.style.transition="none",this.sliderWrapper.style.transform=`translate(${s}px,0)`,this.move=!0,this.sliderWrapper.ondragstart=function(){return!1}}onPointerUp(t){document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp),this.speedX>80?0===this.currentIndex&&this.coordsItemStart>0&&this.move&&this.loop||this.currentIndex===this.itemsLength-1&&this.coordsItemStart<0&&this.move&&this.loop?(this.flag=!0,this.sliderWrapper.removeEventListener("pointerdown",this.onPointerDown)):0===this.currentIndex&&this.coordsItemStart>0&&this.move&&!this.loop?this.currentIndex=0:this.currentIndex===this.itemsLength-1&&this.coordsItemStart<0&&this.move&&!this.loop?this.currentIndex=this.itemsLength-1:this.coordsItemStart<0&&this.move?this.currentIndex++:this.coordsItemStart>0&&this.move&&this.currentIndex--:0===this.currentIndex&&this.coordsItemStart>this.centerSlide&&this.loop||this.currentIndex===this.itemsLength-1&&this.coordsItemEnd<this.centerSlide&&this.loop?(this.flag=!0,this.sliderWrapper.removeEventListener("pointerdown",this.onPointerDown)):0===this.currentIndex&&this.coordsItemStart>this.centerSlide&&!this.loop?this.currentIndex=0:this.currentIndex===this.itemsLength-1&&this.coordsItemEnd<this.centerSlide&&!this.loop?this.currentIndex=this.itemsLength-1:this.coordsItemStart>this.centerSlide&&this.move?this.currentIndex--:this.coordsItemEnd<this.centerSlide&&this.move&&this.currentIndex++,this.move=!1,this.setChangeSlide(this.arrPosition[this.currentIndex])}}function debounce(t,e){let i=!1;return function(){i||(t(),i=!0,setTimeout((()=>{i=!1}),e))}}function throttle(t,e){let i,s,r=!1;return function(...n){if(r)return i=this,void(s=n);t.apply(this,n),r=!0,setTimeout((()=>{r=!1,s&&(t.apply(i,s),i=s=null)}),e)}}const slider=new Slider(document.querySelector(".mainslider"),{pagination:!0,loop:!0});